<!DOCTYPE html>
<html lang="en">
`
<head>
    <meta charset="utf-8" />
    <title>Client-Edge-Cloud coordination Use Cases and Requirements</title>

    <style>
    .two-cols {
      display: grid;
      grid-template-columns: 1fr 1fr;
    }

    table {
      border-collapse:collapse;
    }

    table,th, td {
      border: 1px solid #666;
    }

    td {
      padding:2px 15px;
    }
    </style>

    <script async class="remove" src="https://www.w3.org/Tools/respec/respec-w3c"></script>

    <script class="remove">
        var respecConfig = {
            specStatus: "ED",
            previousPublishDate: "2021-05-31",
            previousMaturity: "draft",
            copyrightStart: "2021",
            edDraftURI: "",

            shortName: "client-edge",
            noRecTrack: true,
            copyrightStart: "2021",

            editors: [{
                name: "Dapeng(Max) Liu",
                companyURL: "http://www.alibabagroup.com/en/global/home",
                company: "Alibaba Group"
              },

              {
                name: "Feiwei Lei",
                companyURL: "http://www.alibabagroup.com/en/global/home",
                company:"Alibaba Group"
              },

              {
                name: "Jingyu Yang",
                companyURL: "http://www.alibabagroup.com/en/global/home",
                company:"Alibaba Group"
              }
            
            ],

            group: "",
            wgPublicList: "",

        };
    </script>
</head>

<body>
    <section id='abstract'>
        <p>
        This document introduces the use cases and requriments of client, edge, cloud coordination mechanism and its standardization. 
        </p>
    </section>
    <section id='sotd'>
        <p>
        This is still a work in progress. The proposal is being incubated in the <a href="https://github.com/w3c/web-networks/">W3C Web & Networks Interest Group</a>.
        </p>
    </section>

    <section>
      <h2>Introduction</h2>
        <p>With the rapid development of cloud computing technology, the centralized cloud is evolving towards distributed "edge cloud" that allows developers to deploy their code as FaaS in 
          the edge cloud which is close to the user's location. One of such service is Alibaba Cloud's <a href="https://help.aliyun.com/document_detail/154621.html?spm=5176.14063831.J_5235666150.3.2cf97427yw6WJ6/">EdgeRoutine</a> 
          service.</p>
      
        <p>
          With the rapid adoption of new technologies such as machine learning, IoT ect in the client side's applications, the client side's application may also need to perform computing intensive work. For example, machine
          learning inference can also be done in client side. As one of such examples, Taobao mobile App leverages client side machine learning inference for user face detection etc. 
          W3C is also working on <a href="https://www.w3.org/groups/wg/webmachinelearning">WebNN</a>  standard that allow client side developers to leverage the machine learning acceleration 
          hardwares that resides in the client side devices.
        </p>

        <p>
          To improve the client side application's performance, there is a trend to offload computing intensive work to the edge cloud, such as cloud app, cloud gaming etc.
          However, current approch could be further optimized if there is a mechanism for Client-Edge-Cloud coordination.
          This document discusses the use cases and requriments of Client-Edge-Cloud coordination mechanism and its standardization.
        </p>

        <p>
          
        </p>

    </section>

    <section>
      <h2>Use Cases</h2>
      <p>
        The client side application could be generally classified into the following categories:
      </p>
        <li>Render intensive application</li>
          <p>
            Render intensive application refers to the client side applications whose main task is to fetch the content from the backend server then rendering the content in the front-end.
            For example, news,social media Web applications and mobile applications belongs to this category.
          </p>
        <li>Computing intensive application</li>
          <p>
            Computing intensive application refers to the client side applications whose main task is to do computing intensive work in the client side. For example, mobile gaming applications 
            need to calculate certain object's location and other complex parameters based on user interaction then rendering in the client side. 
          </p>
        <li>Hybrid application</li>
          <p>
            Hybrid application refers to the application whose main task includes both rendering intesive work and computing intensive work. For example, morden e-commerce mobile application 
            leverage machine learning inference in the client side for AR tpye user experience. At the same time, the e-commerce mobile application needs to fetch dynamic content based
            on uesr preference.
          </p>
        <li>Mobile/static client</li>
        <p>
          Some client side applications remain static most of the time. For example, a camera for traffic monitorning and analysis do not require mobility support. 
          On the other hands, some client side application will change its location continuously. For example, for applications running on a connected vehicle or self driving vehicle, 
          it will change its location rapidly with the vehicle.
        </p>

       

        <section>
          <h3>Cloud App</h3>
          <p>
            Cloud App is a new form of AIoT application which utilizing cloud computing technology to move native mobile application to the cloud. The user interaction happens 
            in the client device side and the computing and rendering process happens in the edge cloud side. This can lower the client's hardware requirement and reduce
            the cost.
          </p>

          <p>
            As one examples of cloud App, Alibaba's Tmall Genie smart speaker leverage edge cloud to offload the computing intensive work from the client side to the edge cloud.
          </p> 

          <p>
            The client, the central cloud, the edge cloud works together in a coordinated way for Cloud App. Typically, the control and orchestration function is located in the central cloud.
            The computing intensive function is located in edge cloud. The user intercation and display function is located in the client.
          </p>

          <figure>
            <img alt="CloudApp" src="images/CloudApp.png" width="600">
            <figcaption>
              Cloud App Architecture
            </figcaption>
          </figure>

        </section>

        <section>
          <h3>Connected vehicles/Self-driving</h3>
          <p>
            Connected vehicles/self-driving cars normally have applictions running on the vehicles. For example, the applications may include Apps for entertainment, navigation ect or for 
            functionalities. Similar with cloud app use cases, some of those applications can be offloaded to the edge cloud. Due to the mobility of the vehicles, other factors, such as the 
            stability of network connection need to be considered when offloading. 
          </p>

        </section>


        <section>
          <h3>VR/AR</h3>
          <p>
            VR/AR devices such as VR/AR glasses normally has limitted hardware resources, so it is preferred to offload the computing intensive task to the edge for acceleration and
            reducing delay since the edge server is deployed near the location of the user.
          </p>
        </section>


        <section>
          <h3>Machine learning </h3>
          <p>
            Machine larning inference can be done in the client side to reduce latency. W3C is working on <a href="https://www.w3.org/groups/wg/webmachinelearning">WebNN</a>  standard that 
            allows client side developers to leverage the machine learning acceleration hardwares reside in the client side devices.
          </p>

          <p>
            However, since the edge cloud is located near to the client and have more powerfull hardware resources, it is also possbile to offload the machine learning inference task to the edge.
          </p>
        </section>


        <section>
          <h3>High availability application</h3>

          <p>
            For the applications which offload some parts of its functionalities to the edge cloud, if the edge cloud is not available due to UE mobility or other reasons,
            it is preferred that the functionalities could be handed over back to the client. More complex rules could be designed to improve the robustness of the application.
          </p>
        </section>
        
    </section>
    <section>
      <h2>Gap Analysis</h2>
    </section>
    <section>
      <h2>Requirements</h2>
      <p>
        The requriments that was derived from the use cases are listed bellow.
      </p>

        <table>
          <tbody>
            <tr>
              <th>Requriments</th>
              <th>Related Use Cases</th>
            </tr>
            
            <tr>
              <td>R1: Client Offload.  Client should be able to offload computing intensive work to an edge resource.
                </td>
              <td>Use case 2.1, 2.2, 2.3, 2.4, 2.5; </td> 
            </tr>

            <tr>
              <td>R2a: Application-Directed Migration.  
                  The application should be able to explictly manage migration of work between computing resources.
                  This may include temporarily running a workload on multiple computing
                  resources to hide transfer latency.
              </td>
              <td>Use case (refs TBD);</td>
            </tr>
            <tr>
              <td>R2b: Live Migration.  The edge cloud should be able to transparently migrate live work between computing resources.
                This includes between edge resources, cloud resources, and back to the client, as necessary.
                If the workload is stateful, this includes state capture and transfer.</td>
              <td>Use case 2.1,2.2, 2.5;</td>
            </tr>
              
            <tr>
              <td>R3: Discovery.  A client should be able to dynamically enumerate available edge resources.</td>
              <td>Use case (refs TBD);</td>
            </tr>
              
            <tr>
              <td>R4: Selection.  A client should be able to select between available resources, including making
                  a decision about whether offload is appropriate (e.g. running on the client may be the best choice).
                  This selection may be automatic or application-directed, and may require metadata or measurements
                  of the performance and latency of edge resources, and may be static or dynamic.
                  To do: perhaps break variants down into separate sub-requirements.
                </td>
              <td>Use case (refs TBD);</td>
            </tr>
              
            <tr>
              <td>R5: Packaging.  A workload should be packaged so it can be executed on available edge resources.
                Note: this means either platform independence OR a means to negotiate which workloads can run where.</td>
              <td>Use case (refs TBD);</td>
            </tr>
              
            <tr>
              <td>R6: Persistence.  It should be possible for a workload to be run "in the background", possibly
                event-driven, even if the client is not active.  This also implies lifetime management (cleaning
                up workloads under some conditions, such as if the client has not connected for a certain amount
                of time, etc.)</td>
              <td>Use case (refs TBD);</td>
            </tr>
              
            <tr>
              <td>R7: Security and Privacy.  The client should be able to control and protect the data used
                by an offloaded workload.
                Note: this may result in constraints upon the selection of offload targets, but 
                it also means data needs to be protected in transit, at rest, etc.</td>
              <td>Use case (refs TBD);</td>
            </tr>
              
            <tr>
              <td>R8: Resource Management.  The client should be able to control the use of resources by an
                  offloaded workload on a per-application basis.
                Note: If an edge resource has a usage charge, for example, a client may want to set
                quotas on offload, and some applications may need more resources than others.
                This may also require a negotiation, e.g. a workload may have minimum requirements,
                making offload mandatory on limited clients.
                </td>
              <td>Use case (refs TBD);</td>
            </tr>
          
          
          </tbody>
        </table>
    </section>

    <section>
      <h2>Architecture Proposals</h2>
      <p>
        This document proposes different architecures that address the needs identified above.</p>

      <section>
        <h3>Seamless code sharing across client/edge/cloud</h3>
        <p>This architecture allows the client, edge and the central cloud share a common code running environment which allows the 
        task running in either client, edge, cloud or both in a coordinated way. 
      </p>

        <p>
          The proposed high level architecure is shown in the following figure:
        </p>

        <figure>
          <img alt="ClientEdgeArchitecture" src="images/Client_Edge_Architecture_v3.png" width="600">
          <figcaption>
            Proposed High Level Architecture
          </figcaption>
        </figure>
      </section>


    </section>

    <section>
          <h2>Standardization Proposals</h2>
            <section>
              <h3>WebAssembly as unified runtime</h3>
                <p> This proposal proposes to extend WebAssembly runtime and use it in both client side and edge cloud side as unified runtime.</p>
                <figure> 
                    <img src="images/WebAssemblyRuntime.png" alt="WebAssemblyRuntime" width="600">
                        <figcaption>
                          WebAssembly As Unified Runtime Architecure
                        </figcaption>
                </figure> 

                <p>
                  The proposed solution includes the following parts:
                </p>

                <li>Load wasm code</li>
                    <p>
                      The client load the WebAssembly code by invoking a standard API. This API should indicate that the wasm code could be offloaded to Edge cloud when certain condition is meet.
                      This API should also set the destination Edge cloud's location identifier.
                    </p>

                <li>Offload wasm code to Edge Cloud</li>
                    <p>
                      The client side's WebAssembly runtime excutes the wasm code and when certain condition is meet, it offload the wasm code to the Edge cloud.
                    </p>

                <li>Run wasm code on Edge cloud</li>
                    <p>
                      The wasm code runs on the Edge cloud, and return the result back to the client side.
                    </p>

                <li>Dispatch back to the client</li>
                    <p>
                      When certain condition is meet, the wasm code is dispatched back to the client side and continue to run.
                    </p>
                </section>
              
              <section>
                <h3>Potential standards</h3>
                  <li>API to load wasm code</li>
                    <p>
                      This API is used to load wasm code to the client's WebAssembly runtime, and it indicates this wasm code could be offloaded to the Edge cloud when certain condition is meet.
                      The standardization of this API is required since different WebAssembly runtime implementation should implement this API in the same way to make sure that the developers have the 
                      same user experience.
                    </p>

                  <li>Communication mechanism and protocol between client and Edge cloud WebAssembly runtime</li>
                    <p>
                      The communication mechanism, the communication protocol and the interface between the client side WebAssembly runtime and the Edge cloud side WebAssembly runtime should be standardized to enable
                      the interoperability of different WebAssembly runtime vendors.
                    </p>

                  <li>Edge cloud availability and network condition discovery</li>
                    <p>
                      The wasm code should only be offloaded when certain condition is meet. The condition may includes Edge cloud availability and network condition etc.
                      Whether this part should be standardized is TBD.
                    </p>

                  <li>Offloading policy </li>
                    <p>
                      This proposal recommend that offloading policy is not standardized to allow the flexibility implementation of different vendors. 
                    </p>
              </section>
          
    </section>

    
</body>

</html>
